# LIBRARIES
import os
import ydb
import json

# CREDENTIALS
# Bot
TG_TOKEN = os.environ.get('TG_TOKEN')
URL = f"https://api.telegram.org/bot{TG_TOKEN}/"

# DATABASE
DRIVER = ydb.DriverConfig(
    endpoint=os.getenv('YDB_ENDPOINT'), 
    database=os.getenv('YDB_DATABASE'),
    credentials=ydb.iam.MetadataUrlCredentials(),
)
DRIVER = ydb.Driver(DRIVER)
DRIVER.wait(fail_fast=True, timeout=5)
POOL = ydb.SessionPool(DRIVER)

# DB API URL
# –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
STUDY_INFO_URL = "https://d5dq3jas75lngluat4jm.4b4k4pg5.apigw.yandexcloud.net/study_info/"
PARTICIP_UPDATE_URL = "https://d5dq3jas75lngluat4jm.4b4k4pg5.apigw.yandexcloud.net/update_particip/"
PARTICIP_INFO_URL = "https://d5dq3jas75lngluat4jm.4b4k4pg5.apigw.yandexcloud.net/particip_info/"
PARTICIP_DELETE_URL = "https://d5dq3jas75lngluat4jm.4b4k4pg5.apigw.yandexcloud.net/delete_particip/"

# TABLES
STUDIES_TABLE = "studies"
BEEPS_TABLE = "beeps"
PARTICIPATION_TABLE = "participation"
SURVEYS_TABLE = "surveys"
USER_IDS_TABLE = "id_username_link"

# –í–†–ï–ú–Ø
# –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
UTC_SHIFT = 3

# –ö–õ–ê–í–ò–ê–¢–£–†–´
# –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é
def join_keyboard():
    return json.dumps({
                "inline_keyboard": [
            [
                {"text": "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è!", "callback_data": "particip_join"}
            ]
        ]
    })

# –î–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è
def agreement_keyboard():
    return json.dumps({
                "inline_keyboard": [
            [
                {"text": "–°–æ–≥–ª–∞—Å–µ–Ω", "callback_data": "particip_agree"},
                {"text": "–ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω", "callback_data": "particip_disagree"}
            ]
        ]
    })


# TEXTS
# –î–ª—è –∫–æ–º–∞–Ω–¥—ã /start
START_MESSAGE = """
*–ü—Ä–∏–≤–µ—Ç! üëã*

–ë–æ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ EMA –∏ –¥–Ω–µ–≤–Ω–∏–∫–æ–≤—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é, –∑–∞–ø—É—Å—Ç–∏–≤ –∫–æ–º–∞–Ω–¥—É /find\\_my\\_study. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–π—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –≤–∞—Å –∑–∞–ø–∏—Å–∞–ª–∏ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–µ–º—É.
"""

# –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
NOT_INVITED_MESSAGE = """
üò¢ *–í–∞—Å –Ω–µ—Ç –≤ —Å–ø–∏—Å–æ—á–∫–∞—Ö...* 

–ö —Å–æ–∂–∞–ª–∞–Ω–∏—é, –Ω–µ —Å–º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –≥–¥–µ –≤—ã –±—ã–ª–∏ –±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ï—Å–ª–∏ —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –æ—à–∏–±–∫–∞, —Ä–µ—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å —Å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–æ—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –µ—â—ë —Ä–∞–∑, –∑–∞–ø—É—Å—Ç–∏–≤ –∫–æ–º–∞–Ω–¥—É /find\\_my\\_study.
"""

# –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
ALREADY_HERE_MESSAGE = """
üö´ *–û—à–∏–±–∫–∞!* 

–ù–µ–ª—å–∑—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é, —Ç.–∫. –≤—ã —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã.
"""

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏
STUDY_INFO_MESSAGE = """
‚ú® *–û—Ç–ª–∏—á–Ω–æ! –ù–∞—à–ª–∏ –≤–∞—à–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ*

{}

{}
"""

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–≥–ª–∞—Å–∏—è
AGREEMENT_TITLE = "*üìÑ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è*"

# –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≥–ª–∞—Å–∏—è
AGREEMENT_PROMPT = """
‚ú® *–°—É–ø–µ—Ä! –í—ã –ø–æ–¥–∫–ª—é—á–∏–ª—Å—å –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é*

–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω —à–∞–≥ ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–Ω–∞–∫–æ–º—å—Ç–µ—Å—å, —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º –≤—ã—à–µ –∏ —Ä–µ—à–∏—Ç–µ —Å–æ–≥–ª–∞—Å–Ω—ã –ª–∏ –≤ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –Ω–µ—Ç.
"""

# –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫, –Ω–µ —Å–æ–≥–ª–∞—Å–∏–ª—Å—è
PARTICIP_INFO_MESSAGE = """
‚ú® *–ì–æ—Ç–æ–≤—å—Ç–µ—Å—å! –°–µ–≥–æ–¥–Ω—è-–∑–∞–≤—Ç—Ä–∞ –ø–æ–π–¥—É—Ç –æ–ø—Ä–æ—Å—ã....*

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Å—ã–ª–∫–∞—Ö:
‚Ä¢ *–í—Ä–µ–º—è –Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø—Ä–æ—Å–∞*: {} –º–∏–Ω.
‚Ä¢ *–ö–æ–ª-–≤–æ –¥–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –æ–ø—Ä–æ—Å–∞*: {}
‚Ä¢¬†*–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø—Ä–æ—Å–∞*: {}
""" 

# –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫, –Ω–µ —Å–æ–≥–ª—Å–∏–ª—Å—è
BYE_BYE_MESSAGE = """
ü•Ä *–î–æ —Å–≤–∏–¥–∞–Ω–∏—è....*

–ú—ã —É–¥–∞–ª–∏–ª–∏ –≤–∞—Å –∏–∑ –±–∞–∑—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –≤—ã –æ—à–∏–±–ª–∏—Å—å, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—Å –∑–∞–Ω–æ–≤–æ.
""" 

# –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–∫–∏–Ω—É—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–æ –µ–≥–æ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–∞—Ö# –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
NOWHERE_TO_LEAVE_MESSAGE = """
üö´ *–û—à–∏–±–∫–∞!* 

–í—ã –∏ —Ç–∞–∫ –Ω–µ —á–∏—Å–ª–∏—Ç–µ—Å—å –Ω–∏ –≤ –æ–¥–Ω–æ–º –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π.
"""
 
# –®–∞–±–ª–æ–Ω –≤–æ–ø—Ä–æ—Å–∞
QUESTION_TEXT_CAPTION = """
_–í–æ–ø—Ä–æ—Å ‚Ññ{} ‚Ä¢ –û—Ç–≤–µ—Ç—å—Ç–µ –¥–æ {}_ 

*{}*
 
_{}_
"""

# –®–∞–±–ª–æ–Ω –≤–æ–ø—Ä–æ—Å–∞
QUESTION_TEXT = """
_–í–æ–ø—Ä–æ—Å ‚Ññ{} ‚Ä¢ –û—Ç–≤–µ—Ç—å—Ç–µ –¥–æ {}_ 

*{}*
"""

# –°–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–æ–±—Ä–æ–∂–∞–µ–º–æ–µ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –æ–ø—Ä–æ—Å–∞
SURVEY_EXPIRE_MESSAGE = """
*–í—Ä–µ–º—è –æ–ø—Ä–æ—Å–∞ –∏—Å—Ç–µ–∫–ª–æ*
–í—ã –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ —á–∞—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤
"""

# –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
THE_END_MESSAGE = """
ü•Ä *–≠—Ç–æ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–ø—Ä–æ—Å, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ...*

–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –∏ –∂–¥–µ–º –≤–∞—Å –≤ —Å–ª–µ–¥—É—é—â–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏!
"""

# –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ —Ö–æ—á–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é, –∫–æ–≥–¥–∞ –æ–Ω –µ–≥–æ —É–∂–µ –ø—Ä–æ—à–µ–ª
ALREAY_PARTICIPATED_INFO = """
üö´ *–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é.*

–í—ã –≤ –Ω–µ–º —É–∂–µ –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏.
"""

# –î–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø—Ä–æ—Å–∞
SURVEY_COMPLETE_MESSAGE = """
_–û–ø—Ä–æ—Å_ 

*–í—ã –ø—Ä–æ—à–ª–∏ –æ–ø—Ä–æ—Å! üòéüëç*
"""

# –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
HELP_MESSAGE = """
*‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ*

*–ë–æ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç:*
- –ù–∞–π—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –≤–∞—Å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
‚Äì –ü—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã
- –í—ã–π—Ç–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã

*–ö–æ–º–∞–Ω–¥—ã:*
- /find\\_my\\_study ‚Äì¬†–Ω–∞–π—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –≤–∞—Å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã
- /leave\\_study ‚Äì –ø–æ–∫–∏–Ω—É—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã
"""

